// =============================================================================
// Code Editor Styles (CodeMirror)
// =============================================================================

@use '../variables' as *;

// Import CodeMirror base styles (from node_modules via sass --load-path)
@use "codemirror/lib/codemirror.css";
@use "codemirror/theme/material-darker.css";

// -----------------------------------------------------------------------------
// Code Editor Wrapper
// -----------------------------------------------------------------------------

.code-editor-wrapper {
  border: 1px solid var(--mockr-border);
  border-radius: $radius;
  overflow: hidden;
  background-color: var(--mockr-surface);

  &.is-invalid {
    border-color: $danger;
  }
}

// -----------------------------------------------------------------------------
// CodeMirror Customizations
// -----------------------------------------------------------------------------

.CodeMirror {
  font-family: $font-family-mono;
  font-size: 0.8125rem;
  line-height: 1.5;
  background-color: var(--mockr-surface);
  color: var(--mockr-text);
}

// Light mode adjustments
.CodeMirror {
  .CodeMirror-gutters {
    background-color: var(--bs-gray-50);
    border-right: 1px solid var(--mockr-border);
  }

  .CodeMirror-linenumber {
    color: var(--bs-gray-500);
  }

  .CodeMirror-activeline-background {
    background-color: var(--bs-gray-50);
  }

  .CodeMirror-cursor {
    border-left-color: var(--mockr-text);
  }

  .CodeMirror-selected {
    background-color: $primary-20;
  }
}

// Dark mode adjustments
[data-bs-theme="dark"] {
  .code-editor-wrapper {
    border-color: var(--mockr-border);
  }

  .CodeMirror {
    background-color: $slate-800;
    color: $slate-200;

    .CodeMirror-gutters {
      background-color: $slate-900;
      border-right-color: var(--mockr-border);
    }

    .CodeMirror-linenumber {
      color: $slate-500;
    }

    .CodeMirror-activeline-background {
      background-color: $slate-700;
    }

    .CodeMirror-cursor {
      border-left-color: $slate-100;
    }

    .CodeMirror-selected {
      background-color: $primary-40;
    }
  }
}

// -----------------------------------------------------------------------------
// Syntax Highlighting - Light Theme
// -----------------------------------------------------------------------------

.cm-s-default {
  .cm-string {
    color: $syntax-string;
  }

  .cm-number {
    color: $syntax-number;
  }

  .cm-keyword {
    color: $syntax-keyword;
  }

  .cm-atom {
    color: $syntax-atom;
  }

  .cm-property {
    color: $syntax-property;
  }

  .cm-tag {
    color: $syntax-tag;
  }

  .cm-attribute {
    color: $syntax-attribute;
  }

  .cm-comment {
    color: $syntax-comment;
    font-style: italic;
  }
}

// -----------------------------------------------------------------------------
// Hidden textarea (original form field)
// -----------------------------------------------------------------------------

.code-editor-textarea {
  display: none;
}
