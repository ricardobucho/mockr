<%= simple_form_for client, url: client.persisted? ? manage_client_path(client) : manage_clients_path, html: { class: "drawer-form" } do |f| %>
  <div class="drawer-form-body">
    <div class="drawer-section">
      <h3 class="drawer-section-title">Basic Information</h3>
      
      <%= f.input :name, required: true, placeholder: "Example API" %>
      <%= f.input :slug, required: true, placeholder: "example-api", hint: "URL-friendly identifier. Used in endpoint paths." %>
      <%= f.input :description, as: :text, input_html: { rows: 3 } %>
    </div>

    <% if client.persisted? %>
      <div class="drawer-section">
        <h3 class="drawer-section-title">Requests</h3>
        <p class="text-muted small mb-3">
          API endpoints for this client. Each request can have multiple responses and indices.
        </p>

        <div class="drawer-tag-cloud">
          <% if client.requests.any? %>
            <% client.requests.order(:name).each do |request| %>
              <span class="drawer-tag drawer-tag-readonly">
                <span class="drawer-tag-status"><%= request.method %></span>
                <span><%= request.name %></span>
              </span>
            <% end %>
          <% else %>
            <span class="drawer-tag-empty">No requests yet</span>
          <% end %>
          <%= link_to new_manage_client_request_path(client), class: "drawer-tag-add", data: { turbo_frame: "drawer-stacked" } do %>
            <i class="bi bi-plus"></i>
            <span>Add</span>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="drawer-form-footer">
    <div class="drawer-form-actions-left">
      <% if client.persisted? %>
        <%= link_to delete_manage_client_path(client), class: "btn btn-action-danger-outline", data: { turbo_frame: "modal" } do %>
          <i class="bi bi-trash me-1"></i>
          Delete
        <% end %>
      <% end %>
    </div>
    <div class="drawer-form-actions">
      <button type="button" class="btn btn-action-secondary" data-action="drawer#close">
        Cancel
      </button>
      <%= f.submit client.persisted? ? "Save Changes" : "Create Client", class: "btn btn-action-primary" %>
    </div>
  </div>
<% end %>
