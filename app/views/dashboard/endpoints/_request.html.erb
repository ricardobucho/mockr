<div class="col">
  <div class="card endpoint-card">
    <div class="card-header">
      <div class="d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-2">
          <i class="bi bi-signpost-split text-muted"></i>
          <span class="card-title"><%= request.name %></span>
        </div>
        <div class="d-flex align-items-center gap-1">
          <% if current_user.manager? %>
            <%= link_to edit_manage_request_path(request), class: "btn btn-action btn-outline-secondary", data: { turbo_frame: "drawer", bs_toggle: "tooltip", bs_title: "Edit" } do %>
              <i class="bi bi-pencil"></i>
            <% end %>
          <% end %>
          <a
            href="<%= show_request_path(request.id) %>"
            class="btn btn-action btn-outline-secondary"
            data-bs-toggle="tooltip"
            data-bs-title="View Logs"
            data-turbo-frame="modal"
          >
            <i class="bi bi-journals"></i>
          </a>
        </div>
      </div>
    </div>
    <div class="card-body">
      <span class="method-badge method-<%= request.method.downcase %>"><%= request.method %></span>
      <span class="endpoint-path ms-2">
        /<%= client.slug %><%= request.path unless request.path == "/" %>
      </span>
    </div>
    <% if request.indices.any? || request.responses.any? %>
      <div class="card-body border-top bg-subtle pt-3">
        <% if request.indices.any? %>
          <div class="row row-cols-1 row-cols-xl-2 g-2 mb-<%= request.responses.any? ? 3 : 0 %>">
            <% request.indices.sort_by(&:name).each do |index| %>
              <%=
                render(
                  "dashboard/endpoints/index",
                  client: client,
                  request: request,
                  index: index,
                )
              %>
            <% end %>
          </div>
        <% end %>
        <% if request.responses.any? %>
          <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 row-cols-xl-4 g-2">
            <% request.responses.sort_by(&:name).each do |response| %>
              <%=
                render(
                  "dashboard/endpoints/response",
                  client: client,
                  request: request,
                  response: response,
                )
              %>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
